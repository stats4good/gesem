<!doctype html>
    <head>

        <title>Venn diagram</title>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
        <link href='https://fonts.googleapis.com/css?family=Quicksand:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="venn.js/venn.js"></script>

            <style>
                body {
                    font-family: 'Quicksand', sans-serif;
                    font-weight: 700;
                    font-size : 14px;
                    margin: 2% 2% 2% 2%;
}

               .venntooltip {
                    font-size : 14px;
                    position: absolute;
                    text-align: center;
                    width: 128px;
                    height: 85px;
                    background: #333;
                    color: #fff;
                    padding: 2px;  
                    border: 0px;
                    border-radius: 8px;
                    opacity: 0;
                }


            </style>



    </head>

<body>

 <div id="venn_one" style=float:left>    
      
	<script>
	
        var sets = [
		    {sets:["Residência"], figure: 3.3, label: "Residência", size: 9970, size2: 630},
                    {sets:["Ocorrência"], figure: 5.1, label: "Ocorrência", size: 9970, size2: 860},
                    {sets:["Notificação"], figure: 17.7, label: "Notificação", size: 9970, size2: 2495},
                    {sets: ["Notificação", "Ocorrência"], figure: 2, label: "Notificação e ocorrência", size: 259, size2: 259},
                    {sets: ["Notificação", "Residência"], figure: 3.8, label: "Notificação e residência", size: 489, size2: 489},
                    {sets: ["Ocorrência", "Residência"], figure: 16.4, label: "Ocorrência e residência", size: 2124, size2: 2124},
                    {sets: ["Notificação", "Ocorrência", "Residência"], figure: 51.8, label: "Notificação, ocorrência e residência", size: 6727, size2: 6727}
                    ];


        var chart = venn.VennDiagram()
            .width(500)
            .height(400)

          

        var div = d3.select("#venn_one").datum(sets).call(chart);
            div.selectAll("text").style("fill", "white");
            div.selectAll(".venn-circle path")
                    .style("fill-opacity", .8)
                    .style("stroke-width", 1)
                    .style("stroke-opacity", 1)
                    .style("stroke", "fff");



        var tooltip = d3.select("#venn_one").append("div")
            .attr("class", "venntooltip");


        div.selectAll("g")
            .on("mouseover", function(d, i) {
                
                venn.sortAreas(div, d);

                
                tooltip.transition().duration(40).style("opacity", 1);
                tooltip.text(d.size2 + " (" + d.figure + ")" + "% dos casos notificados");

                
                
                var selection = d3.select(this).transition("tooltip").duration(400);
                selection.select("path")
                    .style("stroke-width", 3)
                    .style("fill-opacity", d.sets.length == 1 ? .8 : 0)
                    .style("stroke-opacity", 1);
            })

            .on("mousemove", function() {
                tooltip.style("left", (d3.event.pageX) + "px")
                       .style("top", (d3.event.pageY - 28) + "px");
            })

            .on("mouseout", function(d, i) {
                tooltip.transition().duration(2000).style("opacity", 0);
                var selection = d3.select(this).transition("tooltip").duration(400);
                selection.select("path")
                    .style("stroke-width", 3)
                    .style("fill-opacity", d.sets.length == 1 ? .8 : 0)
                    .style("stroke-opacity", 1);
            });

	
        

    </script>

</div> 

</body>

</html>

